import React, { useState, useEffect } from "react";
import { Link, useHistory } from "react-router-dom";

const TAB = [
  {
    name: "Home",
    id: "/dashboard/home",
  },
  {
    name: "Message",
    id: "/dashboard/message",
  },
  {
    name: "Setting",
    id: "/dashboard/setting",
  },
];

function BottomMenu() {
  const history = useHistory();
  const [currentTab, setCurrentTab] = useState(TAB[0].id);

  useEffect(() => {
    // path: /dashboard/ 12 character
    setCurrentTab(history.location.pathname.substring(11));
  }, [history.location.pathname]);

  return (
    <div className="fixed bottom-0 left-0 right-0 z-50 flex h-24 w-full items-center justify-between border-t border-gray-300 bg-white px-8 py-4">
      <Link
        className="flex h-[40px] w-[40px] items-center justify-center rounded-md"
        style={{
          backgroundColor: currentTab === TAB[0].id ? "#FF406E" : "#fff",
          width: currentTab === TAB[0].id ? "80px" : "40px",
          transition: "all 0.2s cubic-bezier(0.62, -0.09, 0.9, 1.4) 0s",
        }}
        onClick={() => {
          setCurrentTab(TAB[0].id);
        }}
        to={TAB[0].id}
      >
        <svg
          style={{
            transform: currentTab === TAB[0].id ? "scale(.5)" : "scale(1)",
            transition: "all 0.2s cubic-bezier(0.62, -0.09, 0.9, 1.4) 0s",
          }}
          width="32"
          height="36"
          viewBox="0 0 32 36"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M3 33H10.5V20.5H21.5V33H29V13.5L16 3.75L3 13.5V33ZM0 36V12L16 0L32 12V36H18.5V23.5H13.5V36H0Z"
            fill={currentTab === TAB[0].id ? "#FFF" : "#FF406E"}
          />
        </svg>
      </Link>
      <Link
        to={TAB[1].id}
        onClick={() => {
          setCurrentTab(TAB[1].id);
        }}
        className="flex h-[40px] w-[40px] items-center justify-center rounded-md"
        style={{
          backgroundColor: currentTab === TAB[1].id ? "#FF406E" : "#fff",
          width: currentTab === TAB[1].id ? "80px" : "40px",
          transition: "all 0.2s cubic-bezier(0.62, -0.09, 0.9, 1.4) 0s",
        }}
      >
        <svg
          style={{
            transform: currentTab === TAB[1].id ? "scale(.5)" : "scale(1)",
            transition: "all 0.2s cubic-bezier(0.62, -0.09, 0.9, 1.4) 0s",
          }}
          width="38"
          height="36"
          viewBox="0 0 38 36"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M7.75 30.15C5.58333 30.15 3.75 29.4 2.25 27.9C0.75 26.4 0 24.5667 0 22.4C0 20.2333 0.75 18.4 2.25 16.9C3.75 15.4 5.58333 14.65 7.75 14.65C9.91667 14.65 11.75 15.4 13.25 16.9C14.75 18.4 15.5 20.2333 15.5 22.4C15.5 24.5667 14.75 26.4 13.25 27.9C11.75 29.4 9.91667 30.15 7.75 30.15ZM7.75 27.15C9.08333 27.15 10.2083 26.6917 11.125 25.775C12.0417 24.8583 12.5 23.7333 12.5 22.4C12.5 21.0667 12.0417 19.9417 11.125 19.025C10.2083 18.1083 9.08333 17.65 7.75 17.65C6.41667 17.65 5.29167 18.1083 4.375 19.025C3.45833 19.9417 3 21.0667 3 22.4C3 23.7333 3.45833 24.8583 4.375 25.775C5.29167 26.6917 6.41667 27.15 7.75 27.15ZM27.25 21.5C24.25 21.5 21.7083 20.4583 19.625 18.375C17.5417 16.2917 16.5 13.75 16.5 10.75C16.5 7.75 17.5417 5.20833 19.625 3.125C21.7083 1.04167 24.25 0 27.25 0C30.25 0 32.7917 1.04167 34.875 3.125C36.9583 5.20833 38 7.75 38 10.75C38 13.75 36.9583 16.2917 34.875 18.375C32.7917 20.4583 30.25 21.5 27.25 21.5ZM23.25 36C21.7167 36 20.4167 35.4667 19.35 34.4C18.2833 33.3333 17.75 32.0333 17.75 30.5C17.75 28.9667 18.2833 27.6667 19.35 26.6C20.4167 25.5333 21.7167 25 23.25 25C24.7833 25 26.0833 25.5333 27.15 26.6C28.2167 27.6667 28.75 28.9667 28.75 30.5C28.75 32.0333 28.2167 33.3333 27.15 34.4C26.0833 35.4667 24.7833 36 23.25 36ZM27.25 18.5C29.4167 18.5 31.25 17.75 32.75 16.25C34.25 14.75 35 12.9167 35 10.75C35 8.58333 34.25 6.75 32.75 5.25C31.25 3.75 29.4167 3 27.25 3C25.0833 3 23.25 3.75 21.75 5.25C20.25 6.75 19.5 8.58333 19.5 10.75C19.5 12.9167 20.25 14.75 21.75 16.25C23.25 17.75 25.0833 18.5 27.25 18.5ZM23.25 33C23.95 33 24.5417 32.7583 25.025 32.275C25.5083 31.7917 25.75 31.2 25.75 30.5C25.75 29.8 25.5083 29.2083 25.025 28.725C24.5417 28.2417 23.95 28 23.25 28C22.55 28 21.9583 28.2417 21.475 28.725C20.9917 29.2083 20.75 29.8 20.75 30.5C20.75 31.2 20.9917 31.7917 21.475 32.275C21.9583 32.7583 22.55 33 23.25 33Z"
            fill={currentTab === TAB[1].id ? "#FFF" : "#FF406E"}
          />
        </svg>
      </Link>
      <Link
        to={TAB[2].id}
        onClick={() => {
          setCurrentTab(TAB[2].id);
        }}
        className="flex h-[40px] w-[40px] items-center justify-center rounded-md"
        style={{
          backgroundColor: currentTab === TAB[2].id ? "#FF406E" : "#fff",
          transition: "all 0.2s cubic-bezier(0.62, -0.09, 0.9, 1.4) 0s",
          width: currentTab === TAB[2].id ? "80px" : "40px",
        }}
      >
        <svg
          style={{
            transform: currentTab === TAB[2].id ? "scale(.5)" : "scale(1)",
            transition: "all 0.2s cubic-bezier(0.62, -0.09, 0.9, 1.4) 0s",
          }}
          width="40"
          height="40"
          viewBox="0 0 40 40"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M15.4 40L14.4 33.7C13.7667 33.4667 13.1 33.15 12.4 32.75C11.7 32.35 11.0833 31.9333 10.55 31.5L4.65 34.2L0 26L5.4 22.05C5.33333 21.75 5.29167 21.4083 5.275 21.025C5.25833 20.6417 5.25 20.3 5.25 20C5.25 19.7 5.25833 19.3583 5.275 18.975C5.29167 18.5917 5.33333 18.25 5.4 17.95L0 14L4.65 5.8L10.55 8.5C11.0833 8.06667 11.7 7.65 12.4 7.25C13.1 6.85 13.7667 6.55 14.4 6.35L15.4 0H24.6L25.6 6.3C26.2333 6.53333 26.9083 6.84167 27.625 7.225C28.3417 7.60833 28.95 8.03333 29.45 8.5L35.35 5.8L40 14L34.6 17.85C34.6667 18.1833 34.7083 18.5417 34.725 18.925C34.7417 19.3083 34.75 19.6667 34.75 20C34.75 20.3333 34.7417 20.6833 34.725 21.05C34.7083 21.4167 34.6667 21.7667 34.6 22.1L40 26L35.35 34.2L29.45 31.5C28.9167 31.9333 28.3083 32.3583 27.625 32.775C26.9417 33.1917 26.2667 33.5 25.6 33.7L24.6 40H15.4ZM20 26.5C21.8 26.5 23.3333 25.8667 24.6 24.6C25.8667 23.3333 26.5 21.8 26.5 20C26.5 18.2 25.8667 16.6667 24.6 15.4C23.3333 14.1333 21.8 13.5 20 13.5C18.2 13.5 16.6667 14.1333 15.4 15.4C14.1333 16.6667 13.5 18.2 13.5 20C13.5 21.8 14.1333 23.3333 15.4 24.6C16.6667 25.8667 18.2 26.5 20 26.5ZM20 23.5C19.0333 23.5 18.2083 23.1583 17.525 22.475C16.8417 21.7917 16.5 20.9667 16.5 20C16.5 19.0333 16.8417 18.2083 17.525 17.525C18.2083 16.8417 19.0333 16.5 20 16.5C20.9667 16.5 21.7917 16.8417 22.475 17.525C23.1583 18.2083 23.5 19.0333 23.5 20C23.5 20.9667 23.1583 21.7917 22.475 22.475C21.7917 23.1583 20.9667 23.5 20 23.5ZM17.8 37H22.2L22.9 31.4C24 31.1333 25.0417 30.7167 26.025 30.15C27.0083 29.5833 27.9 28.9 28.7 28.1L34 30.4L36 26.8L31.3 23.35C31.4333 22.7833 31.5417 22.225 31.625 21.675C31.7083 21.125 31.75 20.5667 31.75 20C31.75 19.4333 31.7167 18.875 31.65 18.325C31.5833 17.775 31.4667 17.2167 31.3 16.65L36 13.2L34 9.6L28.7 11.9C27.9333 11.0333 27.0667 10.3083 26.1 9.725C25.1333 9.14167 24.0667 8.76667 22.9 8.6L22.2 3H17.8L17.1 8.6C15.9667 8.83333 14.9083 9.23333 13.925 9.8C12.9417 10.3667 12.0667 11.0667 11.3 11.9L6 9.6L4 13.2L8.7 16.65C8.56667 17.2167 8.45833 17.775 8.375 18.325C8.29167 18.875 8.25 19.4333 8.25 20C8.25 20.5667 8.29167 21.125 8.375 21.675C8.45833 22.225 8.56667 22.7833 8.7 23.35L4 26.8L6 30.4L11.3 28.1C12.1 28.9 12.9917 29.5833 13.975 30.15C14.9583 30.7167 16 31.1333 17.1 31.4L17.8 37Z"
            fill={currentTab === TAB[2].id ? "#FFF" : "#FF406E"}
          />
        </svg>
      </Link>
    </div>
  );
}

export default BottomMenu;
